{"version":3,"sources":["node/node-directive.js"],"names":[],"mappings":"AAAA;;AAEA,OAAO,eAAe,SAAS,cAAc;IACzC,OAAO;;AAEX,QAAQ,UALO;IACX,UAAU;IACV,OAAO;QACH,QAAgB;QAChB,WAAgB;QAChB,WAAgB;QAChB,UAAgB;QAChB,YAAgB;QAChB,aAAgB;QAChB,YAAgB;;IAEpB,MAAM,SAAA,KAAU,OAAO,SAAS;;QAE5B,IAAI,SAAS;QACb,IAAI,gBAAgB;;QAYpB,QAAQ,GAAG,iBAAiB,aAAa,YAAW;;YAEhD,IAAI,YAAY,EAAE,SAAS,MAAM;YACjC,IAAI,YAAY,EAAE,SAAS,MAAM;;YAGjC,MAAM,SAAS,EAAE,WAAA,WAAW,WAAA;;;QAOhC,QAAQ,GAAG,iBAAiB,aAAa,YAAW;;YAEhD,IAAI,YAAY,EAAE,SAAS,MAAM;YACjC,IAAI,YAAY,EAAE,SAAS,MAAM;;YAGjC,MAAM,YAAY,EAAE,WAAA,WAAW,WAAA;;;QAOnC,QAAQ,GAAG,iBAAiB,YAAY,UAAS,GAAG;;YAEhD,IAAI,iBAAkB,QAAQ,GAAG;YACjC,IAAI,UAAkB,EAAE;YACxB,IAAI,iBAAkB,eAAe,MAAO,eAAe,SAAS;;;YAOpE,IAAI,YAAY,EAAE,SAAS,MAAM;YACjC,IAAI,YAAY,EAAE,SAAS,MAAM;YACjC,IAAI,YAAY,UAAU,iBAAiB,QAAQ;;YAGnD,MAAM,WAAW,EAAE,WAAA,WAAW,WAAA,WAAW,WAAA;;;QAO7C,QAAQ,GAAG,iBAAiB,WAAW,YAAW;;YAE9C,IAAI,YAAY,EAAE,SAAS,MAAM;YACjC,IAAI,YAAY,EAAE,SAAS,MAAM;;YAGjC,MAAM,WAAW,EAAE,WAAA,WAAW,WAAA;;;QAOlC,IAAI,qBAAqB,SAArB,qBAAgC;;QAUpC,MAAM,OAAO,UAAU,UAAS,UAAU;;YAEtC,IAAI,CAAC,EAAE,YAAY,WAAW;gBAC1B,IAAI,WAAW,EAAE,OAAO,UAAU,IAAI;;gBAEtC,UAAU,GAAG,SAAS,UAAU;oBAC5B,GAAG,SAAS,IAAI,GAAG,SAAS;oBAC5B,MAAM,OAAO;oBACb,YAAY;;;gBAGhB,SAAS,SAAS;;;;EAjChC","file":"node/node-directive.js","sourcesContent":["export default {\n    restrict: 'A',\n    scope: {\n        coords:         \"=angularSvgNodesNodeCoords\",\n        col_index:      \"@angularSvgNodesNodeColIndex\",\n        row_index:      \"@angularSvgNodesNodeRowIndex\",\n        onSelect:       \"&angularSvgNodesNodeOnSelect\",\n        onDeselect:     \"&angularSvgNodesNodeOnDeselect\",\n        onMouseOver:    \"&angularSvgNodesNodeOnMouseOver\",\n        onMouseOut:     \"&angularSvgNodesNodeOnMouseOut\"\n    },\n    link: function (scope, element) {\n\n        let curr_x = null;\n        let ANIM_DURATION = 0.2;\n\n        ////////////////////////////////////////////////\n        //\n        // handlers\n        //\n        ////////////////////////////////////////////////\n\n        //----------------------------------\n        // mouse down\n        //----------------------------------\n\n        element[0].addEventListener(\"mousedown\", function() {\n\n            let col_index = _.parseInt(scope.col_index);\n            let row_index = _.parseInt(scope.row_index);\n\n            // call external handler\n            scope.onSelect({ row_index, col_index });\n        });\n\n        //----------------------------------\n        // mouse down\n        //----------------------------------\n\n        element[0].addEventListener(\"mouseover\", function() {\n\n            let col_index = _.parseInt(scope.col_index);\n            let row_index = _.parseInt(scope.row_index);\n\n            // call external handler\n            scope.onMouseOver({ row_index, col_index });\n        });\n\n        //----------------------------------\n        // mouse out\n        //----------------------------------\n\n        element[0].addEventListener(\"mouseout\", function(e) {\n\n            let element_bounds  = element[0].getBoundingClientRect();\n            let mouse_y         = e.clientY;\n            let element_center  = element_bounds.top + (element_bounds.height / 2);\n            //let element_top     = element_bounds.top + VERTICAL_ALLOWANCE;\n            //let element_bottom  = element_bounds.bottom - VERTICAL_ALLOWANCE;\n\n            //console.log(element_top, element_bottom);\n            //console.log(e.clientY, e.layerY ,e.offsetY ,e.screenY, e.y);\n\n            let col_index = _.parseInt(scope.col_index);\n            let row_index = _.parseInt(scope.row_index);\n            let exit_side = mouse_y < element_center ? 'top' : 'bottom';\n\n            // call external handler\n            scope.onMouseOut({ row_index, col_index, exit_side });\n        });\n\n        //----------------------------------\n        // mouse up\n        //----------------------------------\n\n        element[0].addEventListener(\"mouseup\", function() {\n\n            let col_index = _.parseInt(scope.col_index);\n            let row_index = _.parseInt(scope.row_index);\n\n            // call external handler\n            scope.onDeselect({ row_index, col_index });\n        });\n\n        //----------------------------------\n        // position complete\n        //----------------------------------\n\n        let onPositionComplete = function() {\n\n        };\n\n        ////////////////////////////////////////////////\n        //\n        // watchers\n        //\n        ////////////////////////////////////////////////\n\n        scope.$watch('coords', function(newValue) {\n\n            if (!_.isUndefined(newValue)) {\n                let duration = _.isNull(curr_x) ? 0 : ANIM_DURATION;\n\n                TweenLite.to(element, duration, {\n                    x: newValue[0], y: newValue[1],\n                    ease: Power4.easeOut,\n                    onComplete: onPositionComplete\n                });\n\n                curr_x = newValue[0];\n            }\n        });\n    }\n};"],"sourceRoot":"src/app/*.js"}